精弘全文搜索


wiki地址 http://wiki2.myzjut.com

一.项目由来：
  想要提高论坛的搜索速度，目前的X2.5提供了2种除了自带的搜索的方式
      1.sphinx（这个是要配置sphinx环境的，94没带，所以现在的论坛的搜索是原生的，要开启还得配置sphinx环境）
      2.纵横搜索（腾讯出品的，需要撒云平台之类的，DZ官方论坛就是采用纵横搜索的，比上easy，开通即可，具体咋开通没了解过，略麻烦，具体效果看discuz.net）
     
    后一种适用于咱们懒得折腾，94的BBS...
    但是就目前的情况，然后我还是自己搞了一遍精弘的全文搜索，很赞同当初沈奇鹏学长的思路。	
第一阶段：
优化论坛的搜索，用coreseek来替代。

第二阶段：
整合精弘所有产品的数据，做精弘全站搜索，一个输入框，可以搜索到精弘所有产品的数据。

第三阶段：
通过爬虫抓去学校及各学院的资讯信息，进精弘自己的数据库，做全校的搜索引擎。

废话不多说，先上目前的情况（已经开发一个多月了..）
http://210.32.200.89:11063/nav/

二 .目前这个项目的进度和成果是
1.BBS 与PT 都可以全文搜索了
   1.1 BBS 对Posts和threads表建索引，搜索粒度达到每个楼层了，搜到后直接定位到该楼层
   1.2 PT  对torrents建索引,附加效果是和豆瓣连接(这里待研究，Douban的js api没文档而且提供的是v1的接口，php没sdk，目前的v2的是jsonp了，好用是好用了，但是遇到细节问题，yaofur做PT调douban api，怎么考虑种子的标题？我是先正则提取，然后search的api，但是有些还是search不到..yaofur来讲讲Douban吧，毕竟有经验)
   1.3 对于权重和排序，我已经考虑很多了
2.登录（学号，人人网账号）

3.各种小工具（天气,点菜？，资讯，feel，实验室）这里全部做成jq插件，方便其他产品以后才拿出来用。

4.自定义导航（类似于百度自定义导航的），当然带默认的。（数据库用的是mysql）
5.自动补全提示
  目前的策略就是用户搜索过的关键字入库（字段可以有关键字，点击数，日期等，方便做热门关键字搜索）
  然后用户搜索提供最新的搜索关键字提示，以前mysql做过select 20万用户 order一下速度慢，考虑到高效随机写读和利于统计，目前是使用MongoDB了。
  对了，89的mongo 没人做过权限管理，限于我自己也不是很熟悉Mongo，待学习。JS查询语法蛋碎。
6.不元芳了，改metro风格了...（我发现前端3星期，php 1星期是我目前的现状，伤不起啊）

对了，没有用任何第三方框架，纯手码，更健康，所以开发略慢，目前但是基本的构架已经有了，（目测估计以后还是要用其他的成熟MVC框架重构一遍，也许寒假吧，也许..）

三：目前未来的任务就是
1.爬虫入库
  1.1 先讨论入库的问题，爬虫的数据库表结构，求助DBA，使用什么数据库也是个问题。
  1.2 然后写爬虫这个大家都可以参与，无论用什么语言，统计入到统一数据库里完事。
  1.3 etc 这里略复杂

2.后台
  2.1 竞价排名（广告）
  2.2 模块管理
  2.3 doodle管理

然后项目不可能我一个人吧，详细的文档是必须的
1.什么是全文搜索sphinx简介
2..sphinx安装与测试
3..coreseek安装与测试
4..sphinx实时索引
5.etc 

1.推荐国内张宴的blog 对sphinx有介绍（好东西）


另外这项目还可以研究的是
1.高速中文分词算法
2.消息队列
3.搜索算法（coreseek提供现成的）